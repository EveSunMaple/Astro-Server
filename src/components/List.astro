---
import Item from './Item.astro';
import { Icon } from 'astro-icon/components'; // 假设您使用 astro-icon 来渲染图标

const { channel, before = true, after = true } = Astro.props;
const posts = channel.posts || [];

// 获取分页游标
const beforeCursor = posts.length > 0 ? posts[posts.length - 1].id : null;
const afterCursor = posts.length > 0 ? posts[0].id : null;
---

<div class="list-container">
  <div class="messages">
    {posts.map((post) => <Item post={post} />)}
  </div>

  <div class="pagination">
    {before && beforeCursor && (
      <a href={`/before/${beforeCursor}`} class="page-link">
        <Icon name="ri:arrow-left-line" /> 上一页
      </a>
    )}
    {after && afterCursor && (
      <a href={`/after/${afterCursor}`} class="page-link">
        下一页 <Icon name="ri:arrow-right-line" />
      </a>
    )}
  </div>
</div>

<style>
  .list-container {
    margin-top: 2rem;
  }
  .messages {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .pagination {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
  }
  .page-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: #f0f0f0;
    border-radius: 0.25rem;
    text-decoration: none;
    color: #333;
  }
  .page-link:hover {
    background-color: #e0e0e0;
  }
</style>